<h2>オススメ店舗の登録</h2>

<%= form_with model: @restaurant, local: true do |f| %>
  <% if @restaurant.errors.any? %>
    <div id="error_explanation">
      <h2 class="alert alert-danger"><%= @restaurant.errors.count %>件のエラーがあります。</h2>
      <ul>
      <% @restaurant.errors.full_messages.each do |msg| %>
        <li class="alert alert-danger"><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= attachment_image_tag @restaurant, :restaurant_image, :fill, 60, 60, id: :img_prev, class: "img-circle pull-left profile-thumb", fallback: "no_image.jpg" %><br>
  <%= f.attachment_field :restaurant_image, placeholder: "画像", id: :user_img, class: "user-edit-form" %>

  <script type="text/javascript">
    $(function() {
      function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
        $('#img_prev').attr('src', e.target.result);
        }
       reader.readAsDataURL(input.files[0]);
      }
     }
    $("#user_img").change(function(){
        readURL(this);
     });
    });
  </script>

  <%= f.label :name %>
  <%= f.text_field :name, placeholder: "店名" %>

  <%= f.label :description %>
  <%= f.text_area :description, placeholder: "紹介文" %>

  <%= f.label :address %>
  <%= f.text_field :address, placeholder: "住所", class: "address" %>

  <%= f.submit "投稿", class: "btn btn-lg btn-block btn-base-1 mt-20" %>
<% end %>